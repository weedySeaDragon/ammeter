language: ruby

before_install:
  - gem install bundler --version '>=1.9.5'  #  so we can be sure to set code of conduct option= false to avoid an interactive prompt
  - bundle --version
  - gem --version
  - ruby --version


rvm:
  - 2.2
  - 2.1.6
  - 2.0.0
  - 1.9.3
  - jruby-18mode # JRuby in 1.8 mode
  - jruby-19mode # JRuby in 1.9 mode
  - rbx
#  - 1.8.7
#  - ruby-head

env:
  - RSPEC_VERSION='~> 3.3.0'
  - RSPEC_VERSION='~> 3.2.0'
  - RSPEC_VERSION='~> 3.1.0'
  - RSPEC_VERSION='~> 3.0.0'
 # - RSPEC_VERSION=master
  - RSPEC_VERSION='~> 2.99.0'
#  - RSPEC_VERSION='~> 2.14.0'

# whitelist
branches:
  only:
    - wsd--example-app-working
    - get-example-gems-passing

bundler_args: "--retry=3 --jobs=3"

script: "bundle exec rake ci --trace"

matrix:
#  include:
#    - rvm: rbx-2.2.9
#      env: RBX_RUBY_COMPAT=2.1.0 RBX_VERSION=2.2.9
  allow_failures:
    - RSPEC_VERSION='~> 2.99.0'
    - rvm: ruby-head
    - rvm: jruby-18mode
    - rvm: jruby-19mode
    - rvm: rbx

